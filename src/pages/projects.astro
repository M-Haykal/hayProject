---
import { Image } from "astro:assets";

interface Project {
  name_project: string;
  description: string;
  image_preview: string;
  link: string;
  technologies: string[];
}

// Import JSON langsung (Astro mendukung import JSON secara native)
import projectsData from "../data/projects.json";

interface Project {
  name_project: string;
  description: string;
  image_preview: string;
  link: string;
  technologies: string[];
}

const projects: Project[] = projectsData;
---

<section id="projects" class="p-10 bg-[#1e1e1e] text-gray-300">
  <h2 class="text-2xl font-semibold mb-8 font-mono text-[#4fc1ff]">
    // Projects.dart
  </h2>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    {
      projects.map((project) => (
        <div
          class="
            bg-[#1b1b1b]
            border border-[#2d2d2d]
            rounded-lg
            overflow-hidden
            font-mono
            text-sm
            hover:border-[#4fc1ff]
            transition
          ">
          {/* File Header */}
          <div class="flex items-center gap-2 px-4 py-2 bg-[#2d2d2d]">
            <span class="text-[#4fc1ff]">ðŸ“„</span>
            <span class="text-gray-200">{project.name_project}.dart</span>
          </div>

          {/* Preview Image */}
          <div class="border-t border-[#2d2d2d]">
            <img
              src={project.image_preview}
              alt={project.name_project}
              class="w-full h-40 object-cover"
              loading="lazy"
            />
          </div>

          {/* Code Body */}
          <div class="p-4 space-y-2 leading-6">
            <div>
              <span class="text-[#569cd6]">class</span>{" "}
              <span class="text-[#4fc1ff]">
                {project.name_project.replace(/\s+/g, "")}
              </span>{" "}
              <span class="text-white">{`{`}</span>
            </div>

            <div class="pl-4">
              <div>
                <span class="text-[#9cdcfe]">final</span>{" "}
                <span class="text-[#4fc1ff]">String</span>{" "}
                <span class="text-[#9cdcfe]">description</span>{" "}
                <span class="text-white">=</span>{" "}
                <span class="text-[#ce9178]">"{project.description}"</span>;
              </div>

              <div>
                <span class="text-[#9cdcfe]">final</span>{" "}
                <span class="text-[#4fc1ff]">List</span>
                <span class="text-white">&lt;</span>
                <span class="text-[#4fc1ff]">String</span>
                <span class="text-white">&gt;</span>{" "}
                <span class="text-[#9cdcfe]">techStack</span>{" "}
                <span class="text-white">=</span>{" "}
                <span class="text-white">[</span>
                <span class="text-[#ce9178]">
                  {project.technologies.join('", "')}
                </span>
                <span class="text-white">]</span>;
              </div>
            </div>

            <div class="text-white">{`}`}</div>
          </div>

          {/* Footer Action */}
          <div class="px-4 py-3 bg-[#1e1e1e] border-t border-[#2d2d2d]">
            <a
              href={project.link}
              target="_blank"
              class="text-[#4fc1ff] hover:underline">
              project.run();
            </a>
          </div>
        </div>
      ))
    }
  </div>
</section>
